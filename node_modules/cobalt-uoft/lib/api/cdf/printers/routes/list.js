'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = list;

var _http = require('http');

var _http2 = _interopRequireDefault(_http);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function list(req, res, next) {
  var options = {
    host: req.query.host || 'www.teach.cs.toronto.edu',
    port: req.query.port || 80,
    path: req.query.path || '/~cheun550/cdfprinters.json'
  };

  _http2.default.get(options, function (response) {
    if (response.statusCode != 200) {
      var err = new Error('CDF data is currently inaccessible.');
      err.status = 500;
      return next(err);
    }

    var data = '';
    response.on('data', function (chunk) {
      data += chunk;
    });

    response.on('end', function () {
      res.charset = 'utf-8';
      res.set('Content-Type', 'application/json');
      res.send(data);
    });
  });
}